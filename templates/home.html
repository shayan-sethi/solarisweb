{% extends "base.html" %}

{% block content %}
<section id="home" class="max-w-7xl mx-auto px-6 py-20 grid md:grid-cols-2 gap-12 items-center">
    <div class="fade-in space-y-6">
        <h1 class="text-4xl md:text-5xl font-extrabold text-slate-800 leading-tight">
            {{ _('Bring solar energy home.') }}<br><span class="text-cyan-500">{{ _('Save money. Empower sustainability.') }}</span>
        </h1>
        <p class="mt-5 text-slate-600 text-lg leading-relaxed">
            {{ _('Solaris helps you understand your rooftop\'s solar potential, manage installations, schedule smart reminders, and keep your household prepared — now on the web.') }}
        </p>

        <div class="mt-8 flex flex-wrap gap-4">
            {% if current_user.is_authenticated %}
            <a href="{{ url_for('dashboard.index') }}" class="bg-sky-600 hover:bg-sky-700 text-white font-medium px-5 py-3 rounded-lg shadow-md transition">{{ _('Go to dashboard') }}</a>
            <a href="{{ url_for('subsidy.eligibility') }}" class="border border-slate-300 hover:border-cyan-400 hover:text-cyan-600 px-5 py-3 rounded-lg transition">{{ _('Check subsidy') }}</a>
            {% else %}
            <a href="{{ url_for('auth.register') }}" class="bg-sky-600 hover:bg-sky-700 text-white font-medium px-5 py-3 rounded-lg shadow-md transition">{{ _('Create account') }}</a>
            <a href="{{ url_for('auth.login') }}" class="border border-slate-300 hover:border-cyan-400 hover:text-cyan-600 px-5 py-3 rounded-lg transition">{{ _('Sign in') }}</a>
            {% endif %}
        </div>
    </div>

    <div class="relative fade-in">
        <div class="absolute inset-0 bg-gradient-to-br from-cyan-200/30 via-sky-100/20 to-transparent rounded-[2.5rem] blur-3xl"></div>
        <div class="relative glass rounded-[2.5rem] p-6 md:p-8 shadow-xl border border-white/50">
            <div class="flex items-center gap-3 text-cyan-600 font-semibold uppercase tracking-[0.3em] text-xs">
                <span class="h-1.5 w-1.5 rounded-full bg-cyan-500 animate-ping"></span>
                {{ _('Our Mission') }}
            </div>
            <h3 class="mt-5 text-2xl font-semibold text-slate-800 leading-snug">
                {{ _('Empowering every Indian household to harness solar energy with confidence and clarity.') }}
            </h3>
            <p class="mt-4 text-slate-500 text-sm">
                {{ _('We\'re building the platform that makes rooftop solar accessible, transparent, and rewarding for millions of homes across India.') }}
            </p>

            <div class="mt-8 grid grid-cols-2 gap-4 text-sm">
                <div class="rounded-2xl bg-white/70 border border-white/60 px-4 py-5 shadow-sm">
                    <p class="text-xs uppercase tracking-wider text-slate-400">{{ _('Our Goal') }}</p>
                    <p class="mt-2 text-2xl font-bold text-slate-800">13.5k+</p>
                    <p class="mt-1 text-slate-500 text-xs">{{ _('users by 2026') }}</p>
                </div>
                <div class="rounded-2xl bg-white/70 border border-white/60 px-4 py-5 shadow-sm">
                    <p class="text-xs uppercase tracking-wider text-slate-400">{{ _('Solar Installations') }}</p>
                    <p class="mt-2 text-2xl font-bold text-slate-800">1.5k+</p>
                    <p class="mt-1 text-slate-500 text-xs">{{ _('panels by FY4') }}</p>
                </div>
                <div class="col-span-2 rounded-2xl bg-gradient-to-r from-cyan-500/90 to-sky-500/90 text-white px-5 py-5 flex flex-col gap-2 shadow-lg">
                    <p class="text-xs uppercase tracking-[0.25em] text-white/70">{{ _('What We\'re Building') }}</p>
                    <ul class="space-y-2 text-sm text-white/90">
                        <li class="flex gap-2 items-start">
                            <span class="mt-1 h-1.5 w-1.5 flex-none rounded-full bg-white/80"></span>
                            {{ _('AI-powered rooftop assessments for instant solar potential') }}
                        </li>
                        <li class="flex gap-2 items-start">
                            <span class="mt-1 h-1.5 w-1.5 flex-none rounded-full bg-white/80"></span>
                            {{ _('Automated subsidy matching across all government schemes') }}
                        </li>
                        <li class="flex gap-2 items-start">
                            <span class="mt-1 h-1.5 w-1.5 flex-none rounded-full bg-white/80"></span>
                            {{ _('Smart monitoring and maintenance alerts for optimal performance') }}
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="features" class="py-20 bg-gradient-to-b from-white to-sky-50">
    <div class="max-w-6xl mx-auto px-6 text-center">
        <h2 class="text-3xl font-bold mb-10">{{ _('Features') }}</h2>
        <div class="grid md:grid-cols-3 gap-8 text-left">
            <div class="bg-white rounded-2xl shadow-md hover:shadow-xl p-6 transition transform hover:-translate-y-1">
                <h3 class="text-xl font-semibold text-blue-600 mb-2">{{ _('Govt. Scheme Aggregator') }}</h3>
                <p>{{ _('Central & state schemes automatically filtered by eligibility and local DISCOM policies.') }}</p>
            </div>
            <div class="bg-white rounded-2xl shadow-md hover:shadow-xl p-6 transition transform hover:-translate-y-1">
                <h3 class="text-xl font-semibold text-green-600 mb-2">{{ _('Rooftop Solar Estimator') }}</h3>
                <p>{{ _('Uses irradiance, orientation & roof area to estimate capacity, generation & savings.') }}</p>
            </div>
            <div class="bg-white rounded-2xl shadow-md hover:shadow-xl p-6 transition transform hover:-translate-y-1">
                <h3 class="text-xl font-semibold text-amber-600 mb-2">{{ _('Smart Reminders & Logs') }}</h3>
                <p>{{ _('Stay on top of inspections, net-metering, maintenance, health logs and subsidy deadlines.') }}</p>
            </div>
        </div>
    </div>
</section>

<section id="stats" class="py-20 bg-white text-center">
    <div class="max-w-6xl mx-auto px-6">
        <h2 class="text-3xl font-bold mb-8">{{ _('India\'s Solar Potential at a Glance') }}</h2>
        <div class="grid md:grid-cols-3 gap-8">
            <div class="bg-amber-50 p-6 rounded-2xl shadow">
                <strong class="text-3xl text-amber-600">5000+</strong>
                <p class="mt-2 text-slate-600">{{ _('Trillion kWh/year potential energy') }}</p>
            </div>
            <div class="bg-emerald-50 p-6 rounded-2xl shadow">
                <strong class="text-3xl text-green-600">&lt;5%</strong>
                <p class="mt-2 text-slate-600">{{ _('Rooftop solar currently utilized') }}</p>
            </div>
            <div class="bg-cyan-50 p-6 rounded-2xl shadow">
                <strong class="text-3xl text-cyan-600">₹78k+</strong>
                <p class="mt-2 text-slate-600">{{ _('Subsidy available for 3 kW system') }}</p>
            </div>
        </div>
    </div>
</section>

<section id="solar-map" class="py-20 bg-gradient-to-b from-sky-50 to-white">
    <div class="max-w-6xl mx-auto px-6 space-y-10">
        <div class="flex flex-col items-start gap-4 md:flex-row md:items-end md:justify-between md:gap-6">
            <div class="space-y-3 max-w-2xl">
                <span class="inline-flex items-center gap-2 text-xs uppercase tracking-[0.35em] text-cyan-500 font-semibold">
                    <span class="h-1.5 w-1.5 rounded-full bg-cyan-500 animate-pulse"></span>
                    {{ _('Solar tracking') }}
                </span>
                <h2 class="text-3xl md:text-4xl font-bold text-slate-900 leading-tight">{{ _('Solar tracking & shadow map') }}</h2>
                <p class="text-slate-600">
                    {{ _('Drop a pin on your rooftop and watch irradiance tiles pulse where production peaks. The browser map now mirrors the Solaris mobile heat map for a seamless experience.') }}
                </p>
            </div>
            <a href="{{ url_for('main.map') }}" class="header-cta header-cta--outline">
                {{ _('Open full explorer') }}
            </a>
        </div>

        <div class="glass p-6 md:p-8 rounded-[2.5rem] shadow-xl border border-white/50 space-y-6">
            <div class="flex flex-col gap-3 md:grid md:grid-cols-[1fr_auto] md:gap-6">
                <div class="space-y-2">
                    <label for="healthLocationInput" class="text-xs uppercase tracking-[0.35em] text-slate-400 font-semibold">{{ _('Pin a rooftop or neighbourhood') }}</label>
                    <div class="relative flex items-center">
                        <input id="healthLocationInput" type="text" placeholder="{{ _('Search address, city or coordinates…') }}" class="w-full rounded-full border border-slate-200 bg-white/80 px-5 py-3 text-sm shadow-inner focus:border-cyan-400 focus:outline-none focus:ring-2 focus:ring-cyan-100">
                        <button id="healthSearchBtn" class="ml-3 inline-flex items-center gap-2 rounded-full bg-sky-500 px-5 py-3 text-sm font-semibold text-white shadow-lg transition hover:bg-sky-600">
                            <span>{{ _('Pin location') }}</span>
                        </button>
                    </div>
                    <p id="healthStatus" class="text-xs text-slate-500"></p>
                </div>
                <button id="healthRecenterBtn" class="inline-flex items-center justify-center gap-2 rounded-full border border-slate-200 px-5 py-3 text-sm font-semibold text-slate-600 transition hover:border-cyan-300 hover:text-cyan-700">
                    <span class="inline-block h-2 w-2 rounded-full bg-emerald-500 animate-pulse"></span>
                    {{ _('Use my current location') }}
                </button>
            </div>

            <div class="relative rounded-[2.5rem] border border-white/50 shadow-inner overflow-hidden">
                <div id="healthMap" class="h-[520px] w-full"></div>
                <div id="healthLoading" class="pointer-events-none absolute inset-0 flex flex-col items-center justify-center gap-3 bg-slate-950/55 text-white backdrop-blur-sm hidden">
                    <div class="h-9 w-9 rounded-full border-2 border-white/30 border-t-transparent animate-spin"></div>
                    <p class="text-sm font-semibold tracking-wide uppercase">{{ _('Calibrating sunlight data…') }}</p>
                </div>
                <div class="pointer-events-none absolute bottom-6 left-6 flex flex-col gap-3 rounded-2xl bg-slate-900/80 px-5 py-4 text-white shadow-lg backdrop-blur">
                    <div>
                        <p class="text-xs uppercase tracking-[0.3em] text-white/60 font-medium">{{ _('Solar potential') }}</p>
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="text-[11px] font-semibold tracking-wide uppercase text-white/70">{{ _('Low') }}</span>
                        <div id="healthLegendGradient" class="flex h-2.5 w-36 overflow-hidden rounded-full ring-1 ring-white/30"></div>
                        <span class="text-[11px] font-semibold tracking-wide uppercase text-white/70">{{ _('High') }}</span>
                    </div>
                    <p id="healthLegendDate" class="text-xs text-white/70"></p>
                </div>
            </div>

            <div id="healthSolarData" class="grid gap-3 rounded-[1.75rem] border border-slate-200 bg-white/70 p-6 text-sm text-slate-600 shadow-sm md:grid-cols-2">
                <div>
                    <p class="text-xs uppercase tracking-[0.35em] text-slate-400 font-semibold">{{ _('Sunlight snapshot') }}</p>
                    <p id="healthSolarSnapshot" class="mt-2 text-base font-semibold text-slate-800">—</p>
                </div>
                <div>
                    <p class="text-xs uppercase tracking-[0.35em] text-slate-400 font-semibold">{{ _('Day timeline') }}</p>
                    <p id="healthSolarTimeline" class="mt-2 text-base font-semibold text-slate-800">—</p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_scripts %}
<script src="{{ url_for('static', filename='js/health.js') }}"></script>
{% endblock %}

